g = {
    'А': 'Б',
    'Б': 'В',
    'В': 'ГЕЖ',
    'Г': 'ЕД',
    'Е': 'Ж',
    'Д': 'ЕЖК',
    'Ж': 'НЗ',
    'К': 'Л',
    'Н': 'АБВЗ',
    'З': 'ЛКД',
    'Л': 'М',
    'М': 'АНЗ',
}


def f(v, p):
    if len(p) > 1 and p[0] == p[-1]:
        return 1
    if len(p) > len(set(p)):
        return 0
    return sum([f(v2, p + v2) for v2 in g[v]])


print(f('Ж', 'Ж'))
